FROM ubuntu:22.04

# Install required packages
RUN apt update && \
    apt install -y g++ cmake libwt-dev libwthttp-dev libboost-all-dev && \
    apt clean

# Create app folder
WORKDIR /app

# Copy your C++ code into container
COPY . .

# Compile the Wt application from code.cpp
RUN g++ -o smart_quiz code.cpp -lwt -lwthttp

# Expose port for Railway to connect to
ENV PORT=8080
EXPOSE 8080

# Run the app
CMD ["./smart_quiz", "--docroot=.", "--http-address=0.0.0.0", "--http-port=8080"]